<!DOCTYPE html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>החיוך העוזר של מילאי</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Assistant:wght@400;700&display=swap");
      body {
        font-family: "Assistant", sans-serif;
        background-color: #f0f2f5;
        overflow: hidden; /* Prevent body scroll */
      }
      .storybook-container {
        max-width: 1100px;
        width: 100%;
        box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.25);
        border-radius: 0.5rem;
        display: flex;
        flex-direction: column;
        height: 90vh; /* Use viewport height */
        background-color: #fff;
      }
      .storybook-body {
        flex-grow: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        padding: 1rem;
        overflow-y: auto; /* Allow vertical scroll for content if needed */
      }
      /* Cover Page Styles */
      .cover-page {
        width: 50%;
        height: 100%;
        background-size: cover;
        background-position: center;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 0.25rem 0.5rem 0.5rem 0.25rem;
        box-shadow: inset -5px 0px 15px -5px rgba(0, 0, 0, 0.3);
      }
      .cover-title {
        color: white;
        font-size: 2.8rem;
        font-weight: 700;
        text-shadow: 0px 2px 10px rgba(0, 0, 0, 0.8);
        padding: 1.5rem;
        background-color: rgba(0, 0, 0, 0.3);
        border-radius: 0.5rem;
        text-align: center;
      }
      /* Two-page Spread Styles */
      .spread-container {
        display: flex;
        width: 100%;
        height: 100%;
        gap: 1rem; /* Creates a gutter between pages */
      }
      .page {
        width: 50%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #fff;
        border-radius: 0.25rem;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }
      .page.text-page {
        padding: 2.5rem;
        text-align: center;
      }
      .page.image-page {
        padding: 0;
      }
      .page-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      .page p {
        font-size: 1.5rem; /* Responsive font size */
        line-height: 1.7;
      }
      .nav-button {
        transition: all 0.2s ease-in-out;
        border: 1px solid #d1d5db;
      }
      .nav-button:hover:not(:disabled) {
        background-color: #e5e7eb;
        transform: scale(1.05);
      }
      .nav-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* --- Responsive Styles for Mobile & Zoom --- */
      @media (max-width: 768px) {
        .storybook-body {
          padding: 0.5rem;
        }
        .cover-page {
          width: 100%;
          height: 100%;
        }
        .cover-title {
          font-size: 1.8rem;
        }
        .spread-container {
          flex-direction: column; /* Stack pages vertically */
          height: auto; /* Allow container to grow vertically */
          width: 100%;
        }
        .page {
          width: 100%;
          height: auto;
          min-height: 45vh; /* Ensure pages have a minimum height */
        }
        .page p {
          font-size: 1.1rem; /* Adjust font size for mobile */
        }
      }
    </style>
  </head>
  <body class="flex items-center justify-center min-h-screen p-4">
    <div class="storybook-container">
      <div id="storybook" class="storybook-body">
        <!-- Content is rendered here -->
      </div>
      <div class="flex justify-between items-center p-4 bg-gray-100 border-t">
        <button
          id="prev-button"
          class="nav-button bg-white text-gray-800 font-bold py-2 px-6 rounded-full shadow-sm"
        >
          הקודם
        </button>
        <div id="page-number" class="text-gray-700 font-semibold text-lg"></div>
        <button
          id="next-button"
          class="nav-button bg-white text-gray-800 font-bold py-2 px-6 rounded-full shadow-sm"
        >
          הבא
        </button>
      </div>
    </div>

    <script>
      const storyData = [
        // 0: Cover
        { type: "cover", image: "images/1.jpg", title: "החיוך העוזר של מילאי" },
        // 1, 2: Spread 1
        { type: "image", src: "images/2.jpg" },
        {
          type: "text",
          content:
            "זאת מילאי. למילאי יש תלתלים קופצניים וחיוך מיוחד מאוד. כשהיא מחייכת, כולם מרגישים שמחים.",
        },
        // 3, 4: Spread 2
        {
          type: "text",
          content:
            "יום אחד, מילאי ראתה את אמא ואבא שלה עסוקים מאוד. הם בדיוק סיימו לכבס, ועל הספה הייתה ערימה ענקית של בגדים נקיים.",
        },
        { type: "image", src: "images/3.jpg" },
        // 5, 6: Spread 3
        { type: "image", src: "images/4.jpg" },
        {
          type: "text",
          content:
            '"אנחנו צריכים למיין את כל הבגדים האלה," אמר אבא. "כל הצבעים התערבבו יחד," הוסיפה אמא.',
        },
        // 7, 8: Spread 4
        {
          type: "text",
          content:
            'מילאי רצתה לעזור! היא רצה אל ערימת הבגדים. היא הייתה קטנה, והערימה הייתה גדולה. "אני אעזור!" היא קראה בשמחה.',
        },
        { type: "image", src: "images/5.jpg" },
        // 9, 10: Spread 5
        { type: "image", src: "images/6.jpg" },
        {
          type: "text",
          content:
            'היא הביטה באמא שלה וחייכה את החיוך הכי מתוק ועוזר שיש. "לעזור, אמא?" היא שאלה. הלב של אמא נמס.',
        },
        // 11, 12: Spread 6
        {
          type: "text",
          content:
            '"איך תוכלי לעזור, קטנטונת שלי?" שאל אבא בחום. "את עוד לא מכירה את כל הבגדים."',
        },
        { type: "image", src: "images/7.jpg" },
        // 13, 14: Spread 7
        { type: "image", src: "images/8.jpg" },
        {
          type: "text",
          content:
            "למילאי היה רעיון מבריק. היא הצביעה על חולצה אדומה בערימה, ואז הצביעה על קופסת הצעצועים האדומה שלה.",
        },
        // 15, 16: Spread 8
        {
          type: "text",
          content:
            'אמא צחקה. "זה רעיון מצוין!" היא אמרה. "בואי נשים את כל הבגדים האדומים בקופסה האדומה." מילאי מצאה גרב אדומה ומסרה אותה לאמא.',
        },
        { type: "image", src: "images/9.jpg" },
        // 17, 18: Spread 9
        { type: "image", src: "images/10.jpg" },
        {
          type: "text",
          content:
            'אחר כך, מילאי מצאה מכנסיים כחולים והצביעה על הכדור הכחול שלה. אבא הביא סל כחול. "כל הכבוד, מילאי!" הוא אמר.',
        },
        // 19, 20: Spread 10 (Final)
        {
          type: "text",
          content:
            "מילאי עזרה למיין את כל הבגדים - אדום לאדום, כחול לכחול וצהוב לצהוב. היא הייתה עוזרת קטנה אבל חשובה מאוד. לעזור לאחרים עם חיוך היה הכוח הכי טוב מכולם. הסוף!",
        },
        { type: "image", src: "images/11.jpg" },
      ];

      const storybookContainer = document.getElementById("storybook");
      const prevButton = document.getElementById("prev-button");
      const nextButton = document.getElementById("next-button");
      const pageNumberDisplay = document.getElementById("page-number");

      let currentPageIndex = 0; // Start at the cover (index 0)

      function updateButtons() {
        prevButton.disabled = currentPageIndex === 0;
        nextButton.disabled = currentPageIndex + 2 >= storyData.length;
      }

      function updatePageNumber() {
        if (currentPageIndex === 0) {
          pageNumberDisplay.textContent = "כריכה";
        } else {
          pageNumberDisplay.textContent = `עמודים ${currentPageIndex}-${
            currentPageIndex + 1
          }`;
        }
      }

      function renderPage(pageData) {
        const pageElement = document.createElement("div");

        if (pageData.type === "image") {
          pageElement.classList.add("page", "image-page");
          const imageElement = document.createElement("img");
          imageElement.src = pageData.src;
          imageElement.classList.add("page-image");
          imageElement.onerror = () =>
            (imageElement.src =
              "https://placehold.co/500x700/e2e8f0/4a5568?text=Image+Missing");
          pageElement.appendChild(imageElement);
        } else if (pageData.type === "text") {
          pageElement.classList.add("page", "text-page");
          const textElement = document.createElement("p");
          textElement.classList.add("text-gray-800", "leading-relaxed");
          textElement.textContent = pageData.content;
          pageElement.appendChild(textElement);
        }
        return pageElement;
      }

      function render() {
        storybookContainer.innerHTML = ""; // Always clear previous content

        if (currentPageIndex === 0) {
          // Render the cover page (special case)
          const coverData = storyData[0];
          const coverElement = document.createElement("div");
          coverElement.classList.add("cover-page");
          coverElement.style.backgroundImage = `url('${coverData.image}')`;
          const titleElement = document.createElement("h1");
          titleElement.classList.add("cover-title");
          titleElement.textContent = coverData.title;
          coverElement.appendChild(titleElement);
          storybookContainer.appendChild(coverElement);
        } else {
          // Render a two-page spread
          const spreadContainer = document.createElement("div");
          spreadContainer.classList.add("spread-container");

          // Right Page (in RTL, the first element is on the right)
          const rightPageData = storyData[currentPageIndex];
          if (rightPageData) {
            spreadContainer.appendChild(renderPage(rightPageData));
          }

          // Left Page
          const leftPageData = storyData[currentPageIndex + 1];
          if (leftPageData) {
            spreadContainer.appendChild(renderPage(leftPageData));
          }

          storybookContainer.appendChild(spreadContainer);
        }

        updatePageNumber();
        updateButtons();
      }

      prevButton.addEventListener("click", () => {
        if (currentPageIndex > 0) {
          currentPageIndex = currentPageIndex === 1 ? 0 : currentPageIndex - 2;
          render();
        }
      });

      nextButton.addEventListener("click", () => {
        if (currentPageIndex + 2 < storyData.length) {
          currentPageIndex = currentPageIndex === 0 ? 1 : currentPageIndex + 2;
          render();
        }
      });

      // Initial render on page load
      document.addEventListener("DOMContentLoaded", render);
    </script>
  </body>
</html>
